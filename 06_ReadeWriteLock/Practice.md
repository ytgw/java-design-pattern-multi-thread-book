# 6章 練習問題
不正解と書かれている問題は間違った問題で、何も書かれていない問題は正解した。

## 問題1
1. o
2. x
3. o
4. o


## 問題2
bufferが壊れて、表示される文字列が複数種類の文字で構成される。


## 問題3
ReaderThreadが並列実行できないので、表示されるスピードが遅くなる。


## 問題4
省略。
(不正解)synchronizedを削除するのを忘れていた。


## 問題5
(不正解)
lockメソッドの実装が悪く内部で例外をあげて失敗してロックを取得できなかった場合にも、unlockメソッドが実行されてしまう。
そのことで、実際には排他制御が必要な処理なのに、それをできずに実行され安全性が悪化する。

(正解)
外からインタラプトされて、lockメソッドがInterruptedExceptionで失敗する可能性がある。
(サンプルプログラムの範囲では問題ないが、)lockメソッドの実装は問題ないが、InterruptedException発生時にunlockを必要以上に呼び出してしまう。


## 問題6
複数のReaderThreadが途切れなく実行され、WriterThreadがずっとwaitのままになってしまうから。
上記のような状況を避けるため、書き込み待ちスレッドがいたら読み込みスレッドを待たせる必要がある。
また、preferWriterを持たないと、今度は逆に読み込みスレッドがwaitのままになってしまうので、書き込み後には読み込み優先、読み込み後には書き込み優先にした方が良い。


## 問題7
1. x
2. x: readLock, writeLock, readLock, readUnlockの順番の際は2番目のreadLockはwait状態のため。
